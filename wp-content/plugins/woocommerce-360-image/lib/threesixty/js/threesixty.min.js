!function(s){"use strict";s.ThreeSixty=function(e,r){var o,i=this,n=[];i.$el=s(e),i.el=e,i.$el.data("ThreeSixty",i),i.init=function(){(o=s.extend({},s.ThreeSixty.defaultOptions,r)).disableSpin&&(o.currentFrame=1,o.endFrame=1),i.initProgress(),i.loadImages()},i.resize=function(){},i.initProgress=function(){i.$el.css({"background-image":"none !important"}),o.styles&&i.$el.css(o.styles),i.responsive(),i.$el.find(o.progress).css({marginTop:o.height/2-15+"px"}),i.$el.find(o.progress).fadeIn("slow"),i.$el.find(o.imgList).hide()},i.loadImages=function(){var e,r,t,a;e=document.createElement("li"),a=o.zeroBased?0:1,r=o.imgArray?o.imgArray[o.loadedImages]:o.domain+o.imagePath+o.filePrefix+i.zeroPad(o.loadedImages+a)+o.ext+(i.browser.isIE()?"?"+(new Date).getTime():""),t=s("<img>").attr("src",r).addClass("previous-image").appendTo(e),n.push(t),i.$el.find(o.imgList).append(e),s(t).load(function(){i.imageLoaded()})},i.imageLoaded=function(){o.loadedImages+=1,s(o.progress+" span").text(Math.floor(o.loadedImages/o.totalFrames*100)+"%"),o.loadedImages>=o.totalFrames?(o.disableSpin&&n[0].removeClass("previous-image").addClass("current-image"),s(o.progress).fadeOut("slow",function(){s(this).hide(),i.showImages(),i.showNavigation()})):i.loadImages()},i.showImages=function(){i.$el.find(".txtC").fadeIn(),i.$el.find(o.imgList).fadeIn(),i.ready=!0,o.ready=!0,o.drag&&i.initEvents(),i.refresh(),i.initPlugins(),o.onReady(),setTimeout(function(){i.responsive()},50)},i.initPlugins=function(){s.each(o.plugins,function(e,r){if("function"!=typeof s[r])throw new Error(r+" not available.");s[r].call(i,i.$el,o)})},i.showNavigation=function(){var e,r,t,a;o.navigation&&!o.navigation_init&&(e=s("<div/>").attr("class","nav_bar"),r=s("<a/>").attr({href:"#",class:"nav_bar_next"}).html("next"),t=s("<a/>").attr({href:"#",class:"nav_bar_previous"}).html("previous"),a=s("<a/>").attr({href:"#",class:"nav_bar_play"}).html("play"),e.append(t),e.append(a),e.append(r),i.$el.prepend(e),r.on("mousedown touchstart",i.next),t.on("mousedown touchstart",i.previous),a.on("mousedown touchstart",i.play_stop),o.navigation_init=!0)},i.play_stop=function(e){e.preventDefault(),o.autoplay?(o.autoplay=!1,s(e.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(o.play),o.play=null):(o.autoplay=!0,o.play=setInterval(i.moveToNextFrame,o.playSpeed),s(e.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"))},i.next=function(e){e&&e.preventDefault(),o.endFrame-=5,i.refresh()},i.previous=function(e){e&&e.preventDefault(),o.endFrame+=5,i.refresh()},i.play=function(e){var r=e||o.playSpeed;o.autoplay||(o.autoplay=!0,o.play=setInterval(i.moveToNextFrame,r))},i.stop=function(){o.autoplay&&(o.autoplay=!1,clearInterval(o.play),o.play=null)},i.moveToNextFrame=function(){1===o.autoplayDirection?--o.endFrame:o.endFrame+=1,i.refresh()},i.gotoAndPlay=function(e){if(o.disableWrap)o.endFrame=e,i.refresh();else{var r=Math.ceil(o.endFrame/o.totalFrames);0===r&&(r=1);var t=1<r?o.endFrame-(r-1)*o.totalFrames:o.endFrame,a=o.totalFrames-t,n=0;n=0<e-t?e-t<t+(o.totalFrames-e)?o.endFrame+(e-t):o.endFrame-(t+(o.totalFrames-e)):t-e<a+e?o.endFrame-(t-e):o.endFrame+(a+e),t!==e&&(o.endFrame=n,i.refresh())}},i.initEvents=function(){i.$el.on("mousedown touchstart touchmove touchend mousemove click",function(e){"mousedown"===e.type&&1===e.which||"touchstart"===e.type?(o.pointerStartPosX=i.getPointerEvent(e).pageX,o.dragging=!0):"touchmove"===e.type?i.trackPointer(e):"touchend"===e.type&&(o.dragging=!1)}),s(document).on("mouseup",function(e){o.dragging=!1,s(this).css("cursor","none")}),s(window).on("resize",function(e){i.responsive()}),s(document).on("mousemove",function(e){o.dragging?(e.preventDefault(),!i.browser.isIE&&o.showCursor&&i.$el.css("cursor","url(assets/images/hand_closed.png), auto")):!i.browser.isIE&&o.showCursor&&i.$el.css("cursor","url(assets/images/hand_open.png), auto"),i.trackPointer(e)}),s(window).resize(function(){i.resize()})},i.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},i.trackPointer=function(e){o.ready&&o.dragging&&(o.pointerEndPosX=i.getPointerEvent(e).pageX,o.monitorStartTime<(new Date).getTime()-o.monitorInt&&(o.pointerDistance=o.pointerEndPosX-o.pointerStartPosX,0<o.pointerDistance?o.endFrame=o.currentFrame+Math.ceil((o.totalFrames-1)*o.speedMultiplier*(o.pointerDistance/i.$el.width())):o.endFrame=o.currentFrame+Math.floor((o.totalFrames-1)*o.speedMultiplier*(o.pointerDistance/i.$el.width())),o.disableWrap&&(o.endFrame=Math.min(o.totalFrames-(o.zeroBased?1:0),o.endFrame),o.endFrame=Math.max(o.zeroBased?0:1,o.endFrame)),i.refresh(),o.monitorStartTime=(new Date).getTime(),o.pointerStartPosX=i.getPointerEvent(e).pageX))},i.refresh=function(){0===o.ticker&&(o.ticker=setInterval(i.render,Math.round(1e3/o.framerate)))},i.render=function(){var e;o.currentFrame!==o.endFrame?(e=o.endFrame<o.currentFrame?Math.floor(.1*(o.endFrame-o.currentFrame)):Math.ceil(.1*(o.endFrame-o.currentFrame)),i.hidePreviousFrame(),o.currentFrame+=e,i.showCurrentFrame(),i.$el.trigger("frameIndexChanged",[i.getNormalizedCurrentFrame(),o.totalFrames])):(window.clearInterval(o.ticker),o.ticker=0)},i.hidePreviousFrame=function(){n[i.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image")},i.showCurrentFrame=function(){n[i.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image")},i.getNormalizedCurrentFrame=function(){var e,r;return o.disableWrap?(e=Math.min(o.currentFrame,o.totalFrames-(o.zeroBased?1:0)),r=Math.min(o.endFrame,o.totalFrames-(o.zeroBased?1:0)),e=Math.max(e,o.zeroBased?0:1),r=Math.max(r,o.zeroBased?0:1),o.currentFrame=e,o.endFrame=r):(e=Math.ceil(o.currentFrame%o.totalFrames))<0&&(e+=o.totalFrames-(o.zeroBased?1:0)),e},i.getCurrentFrame=function(){return o.currentFrame},i.responsive=function(){o.responsive},i.zeroPad=function(e){var r=Math.log(o.totalFrames)/Math.LN10,t=Math.round(1e3*r)/1e3;return function(e,r){var t=e.toString();if(o.zeroPadding)for(;t.length<r;)t="0"+t;return t}(e,Math.floor(t)+1)},i.browser={},i.browser.isIE=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var r=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(r)&&(e=parseFloat(RegExp.$1))}return-1!==e},i.getConfig=function(){return o},s.ThreeSixty.defaultOptions={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1,disableWrap:!1,responsive:!1,zeroPadding:!1,zeroBased:!1,plugins:[],showCursor:!1,drag:!0,onReady:function(){},imgList:".threesixty_images",imgArray:null,playSpeed:100},i.init()},s.fn.ThreeSixty=function(e){return Object.create(new s.ThreeSixty(this,e))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function r(){}return r.prototype=e,new r});
